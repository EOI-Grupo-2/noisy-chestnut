<!DOCTYPE html>
<html lang="es" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Title</title>
    <link rel="stylesheet" th:href="@{/css/global.css}"/>
    <script th:src="@{/js/modal.js}"></script>
    <script src="https://kit.fontawesome.com/cfb847b9dd.js" crossorigin="anonymous"></script>
    <script th:src="@{/js/tabs.js}"></script>
    <script th:src="@{/js/search.js}"></script>
    <script th:src="@{/js/inputNumber.js}"></script>
    <script th:src="@{/js/menuListener.js}"></script>
    <script th:src="@{/js/openMenu.js}"></script>
    <script th:src="@{/js/errorContainer.js}"></script>
</head>
<body>
<div class="page-layout">
    <div class="menu" id="menuModal">
        <button class="menu__close-button" onclick="closeMenu('menuModal')">
            <i class=" fa-solid fa-xmark fa-lg" style="color: #ffffff;"></i>
        </button>
        <h2 class="menu__title">Noisy-chestnut</h2>
        <ul class="menu__items">
            <li class="menu__item"><a href="/" class="menu__link">Inicio</a></li>
            <li class="menu__item"><a href="/publication/artists" class="menu__link">Artistas</a></li>
            <li class="menu__item"><a href="/concert" class="menu__link">Conciertos</a></li>
            <li class="menu__item"><a href="/search" class="menu__link">Buscar</a></li>
            <li sec:authorize="hasAuthority('USER')" class="menu__item"><a href="/publication/create-publication" class="menu__link">Nueva publicación</a></li>
            <li sec:authorize="hasAuthority('ADMIN')" class="menu__item"><a href="/users/admin" class="menu__link">Panel de administrador</a></li>
            <li sec:authorize="hasAuthority('PLACES_ADMIN')" class="menu__item"><a href="/places/admin" class="menu__link">Panel de administrador de lugares</a></li>
            <li sec:authorize="hasAuthority('CONCERT_ADMIN')" class="menu__item"><a href="/concert/admin" class="menu__link">Panel de administrador de conciertos</a></li>
            <li sec:authorize="!isAuthenticated()" class="menu__item"><a href="/login" class="menu__link">Iniciar sesión</a></li>
            <li sec:authorize="!isAuthenticated()" class="menu__item"><a href="/users/register" class="menu__link">Registrarse</a></li>
            <li sec:authorize="isAuthenticated()" class="menu__item"><a  th:href="${'/users/'+ #authentication.getPrincipal().getId() +'/profile'}" class="menu__link" th:text="${#authentication.getName()}"></a></li>
            <li sec:authorize="isAuthenticated()" class="menu__item"><a href="/logout" class="menu__link">Cerrar sesión</a></li>
            <li class="menu__item"><a href="/privacy" class="menu__link">Política de Privacidad</a></li>
            <li class="menu__item"><a href="/terms" class="menu__link">Términos y Condiciones</a></li>
            <li class="menu__item"><span class="menu__link">© 2025 Noisy-chestnut</span></li>
        </ul>
    </div>
    <div layout:fragment="content">

    </div>

    <button class="menu__button" onclick="openMenu('menuModal')">
        <i class="fa fa-bars fa-2xl" style="color: #ffffff"></i>
    </button>

    <!-- Botón de chat solo para usuarios autenticados -->
    <a sec:authorize="isAuthenticated()" class="chat-modal__button" href="/chat">
        <i class="fa-regular fa-message fa-2xl" style="color: #ffffff;"></i>
    </a>

</div>
</body>
</html>